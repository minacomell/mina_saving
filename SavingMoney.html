<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Mina's Saving</title>

<style>
body{
    font-family:'Segoe UI',sans-serif;
    margin:0;
    background:linear-gradient(135deg,#ffd6e7,#e0d4ff,#d4f1ff);
}

.page{display:none;height:100vh;}
.active{display:flex;}

.center{
    justify-content:center;
    align-items:center;
    flex-direction:column;
    text-align:center;
}

.container{
    background:white;
    padding:25px;
    border-radius:20px;
    box-shadow:0 10px 25px rgba(0,0,0,0.1);
    width:90%;
    max-width:650px;
}

.icon{
    font-size:50px;
    animation:float 2s infinite ease-in-out;
}

@keyframes float{
    0%{transform:translateY(0);}
    50%{transform:translateY(-10px);}
    100%{transform:translateY(0);}
}

button{
    background:#ff8fb1;
    border:none;
    padding:10px 15px;
    border-radius:10px;
    color:white;
    cursor:pointer;
    margin:5px;
}

button:hover{background:#ff6f9a;}

input{
    padding:8px;
    border-radius:8px;
    border:1px solid #ddd;
}

table{
    width:100%;
    border-collapse:collapse;
    margin-top:10px;
}

th,td{
    border:1px solid #eee;
    padding:8px;
    text-align:center;
}

th{background:#f3ecff;}

.progress{
    background:#eee;
    border-radius:10px;
    overflow:hidden;
    height:15px;
    margin-top:10px;
}

.bar{
    height:100%;
    width:0%;
    background:#7a5cff;
}
</style>
</head>

<body>

<!-- HALAMAN 1 -->
<div id="home" class="page active center">
    <div class="container">
        <div class="icon">ðŸ’°</div>
        <h1>Mina's Saving</h1>
        <p>Manage your saving with Mina âœ¨</p>
        <button onclick="toTarget()">Start</button>
    </div>
</div>

<!-- HALAMAN TARGET -->
<div id="targetPage" class="page center">
    <div class="container">
        <h2>Pilih Target Tabungan ðŸŽ¯</h2>
        Target: Rp <input type="text" id="targetInput" value="1.000.000">
        <br>
        <button onclick="setTarget()">Lanjut</button>
        <button onclick="goHome()">â¬… Kembali</button>
    </div>
</div>

<!-- HALAMAN APP -->
<div id="appPage" class="page center">
    <div class="container">

        <button onclick="toTarget()">â¬… Kembali</button>

        <h2>Target: Rp <span id="targetText"></span></h2>

        Jumlah: Rp <input type="text" id="jumlah">

        <div>
            <button onclick="tambah()">âž• Nabung</button>
            <button onclick="kurang()">âž– Ambil</button>
        </div>

        <div class="progress">
            <div class="bar" id="bar"></div>
        </div>

        <p>Total Saldo: Rp <span id="total">0</span></p>
        <p>Progress: <span id="persen">0</span>%</p>

        <table>
            <thead>
                <tr>
                    <th>Hari</th>
                    <th>Tanggal</th>
                    <th>Pemasukan</th>
                    <th>Pengeluaran</th>
                    <th>Saldo</th>
                </tr>
            </thead>
            <tbody id="tabel"></tbody>
        </table>

    </div>
</div>

<script>
let allData = {};
let currentTarget = 0;

function formatRupiah(angka){
    angka = angka.replace(/\D/g,'');
    return angka.replace(/\B(?=(\d{3})+(?!\d))/g,'.');
}

function parseRupiah(str){
    return Number(str.replace(/\./g,'')) || 0;
}

document.getElementById('targetInput').addEventListener('input',function(){
    this.value = formatRupiah(this.value);
});

function toTarget(){showPage('targetPage');}
function goHome(){showPage('home');}

function setTarget(){
    currentTarget = parseRupiah(document.getElementById("targetInput").value);
    if(!allData[currentTarget]) allData[currentTarget]=[];
    document.getElementById("targetText").innerText=currentTarget.toLocaleString('id-ID');
    showPage('appPage');
    update();
}

function showPage(id){
    document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
    document.getElementById(id).classList.add('active');
}

function getToday(){
    let now=new Date();
    return {
        hari:now.toLocaleDateString('id-ID',{weekday:'long'}),
        tanggal:now.toLocaleDateString('id-ID')
    };
}

function tambah(){
    let jumlah=parseRupiah(document.getElementById("jumlah").value);
    if(!jumlah)return;

    let t=getToday();
    allData[currentTarget].push({hari:t.hari,tanggal:t.tanggal,masuk:jumlah,keluar:0});
    document.getElementById("jumlah").value="";
    update();
}

function kurang(){
    let jumlah=parseRupiah(document.getElementById("jumlah").value);
    if(!jumlah)return;

    let t=getToday();
    allData[currentTarget].push({hari:t.hari,tanggal:t.tanggal,masuk:0,keluar:jumlah});
    document.getElementById("jumlah").value="";
    update();
}

function update(){
    let data=allData[currentTarget]||[];
    let saldo=0;

    let tabel=document.getElementById("tabel");
    tabel.innerHTML="";

    data.forEach(d=>{
        saldo += d.masuk;
        saldo -= d.keluar;

        tabel.innerHTML+=`
        <tr>
            <td>${d.hari}</td>
            <td>${d.tanggal}</td>
            <td>${d.masuk? 'Rp '+d.masuk.toLocaleString('id-ID'):'-'}</td>
            <td>${d.keluar? 'Rp '+d.keluar.toLocaleString('id-ID'):'-'}</td>
            <td>Rp ${saldo.toLocaleString('id-ID')}</td>
        </tr>`;
    });

    document.getElementById("total").innerText=saldo.toLocaleString('id-ID');

    let persen=Math.min(100,(saldo/currentTarget)*100).toFixed(1);
    document.getElementById("persen").innerText=persen;
    document.getElementById("bar").style.width=persen+"%";
}
</script>

</body>
</html>