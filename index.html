<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Mina‚Äôs Finance Assistant</title>

<style>
:root{
  --bg:#ffeef5;
  --card:#ffffff;
  --primary:#ff9ec4;
  --text:#333;
}

body.dark{
  --bg:#1e1e2f;
  --card:#2b2b3c;
  --primary:#ff9ec4;
  --text:#eee;
}

body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:var(--bg);
  color:var(--text);
  transition:.3s;
}

.page{
  display:none;
  padding:20px;
  min-height:100vh;
}

.active{display:block}

.card{
  background:var(--card);
  padding:20px;
  border-radius:20px;
  box-shadow:0 5px 15px rgba(0,0,0,.1);
  margin:10px 0;
}

button{
  padding:10px 20px;
  border:none;
  border-radius:20px;
  background:var(--primary);
  color:white;
  cursor:pointer;
  margin:5px;
}

input, select{
  padding:10px;
  border-radius:10px;
  border:1px solid #ccc;
  width:100%;
  margin:5px 0;
}

table{
  width:100%;
  border-collapse:collapse;
}

td,th{
  padding:8px;
  border-bottom:1px solid #ddd;
  text-align:center;
}

.progress{
  height:20px;
  background:#ddd;
  border-radius:10px;
  overflow:hidden;
}

.progress-bar{
  height:100%;
  background:linear-gradient(90deg,#ff9ec4,#ffd6e7);
  width:0%;
}

.cat{
  position:fixed;
  bottom:10px;
  right:10px;
  width:100px;
  animation:float 3s infinite;
  cursor:pointer;
}

@keyframes float{
  0%{transform:translateY(0)}
  50%{transform:translateY(-10px)}
  100%{transform:translateY(0)}
}

.bubble{
  position:fixed;
  bottom:120px;
  right:20px;
  background:white;
  padding:10px;
  border-radius:15px;
  box-shadow:0 3px 10px rgba(0,0,0,.2);
  max-width:200px;
}

.nav button{
  margin:3px;
}
</style>
</head>
<body>

<!-- HOME -->
<div id="home" class="page active">
  <div class="card" style="text-align:center">
    <h1>Mina‚Äôs Finance Assistant üê±üí∞</h1>
    <p>Hi, I‚Äôm Mina üëã<br>Your cute assistant to manage savings, debts, and finances easily.</p>
    <button onclick="openPage('savings')">Let‚Äôs Start ‚ú®</button>
    <br><br>
    <button onclick="toggleDark()">Toggle Theme üåô</button>
  </div>
</div>

<!-- SAVINGS -->
<div id="savings" class="page">
  <div class="nav">
    <button onclick="openPage('home')">Home</button>
    <button onclick="openPage('debts')">Debts</button>
    <button onclick="openPage('planner')">Money Planner</button>
  </div>

  <div class="card">
    <h2>Savings</h2>
    <input id="targetName" placeholder="Saving title">
    <input id="targetAmount" type="number" placeholder="Target amount">
    <button onclick="addTarget()">Add Target</button>
  </div>

  <div class="card">
    <input id="saveInput" type="number" placeholder="Amount to save">
    <button onclick="addSaving()">Save Money üí∞</button>
  </div>

  <div id="targets"></div>
</div>

<!-- DEBTS -->
<div id="debts" class="page">
  <div class="nav">
    <button onclick="openPage('home')">Home</button>
    <button onclick="openPage('savings')">Savings</button>
    <button onclick="openPage('planner')">Money Planner</button>
  </div>

  <div class="card">
    <h2>Debts</h2>
    <input id="debtName" placeholder="Name">
    <input id="debtAmount" type="number" placeholder="Amount">
    <button onclick="addDebt()">Add</button>
  </div>

  <div id="debtList"></div>
</div>

<!-- MONEY PLANNER -->
<div id="planner" class="page">
  <div class="nav">
    <button onclick="openPage('home')">Home</button>
    <button onclick="openPage('savings')">Savings</button>
    <button onclick="openPage('debts')">Debts</button>
  </div>

  <div class="card">
    <h2>Money Planner</h2>
    <input id="totalMoney" type="number" placeholder="Total money">
    <select id="priority">
      <option value="40">Installments Priority</option>
      <option value="30">Food Priority</option>
      <option value="20">Savings Priority</option>
    </select>
    <button onclick="planMoney()">Calculate</button>
  </div>

  <div id="planResult"></div>
</div>

<img src="https://cdn-icons-png.flaticon.com/512/616/616408.png" class="cat" onclick="meow()">
<div id="bubble" class="bubble">Hi, I‚Äôm Mina üê±</div>

<audio id="meowSound" src="https://www.fesliyanstudios.com/play-mp3/4386"></audio>
<audio id="coinSound" src="https://www.fesliyanstudios.com/play-mp3/387"></audio>
<audio id="successSound" src="https://www.fesliyanstudios.com/play-mp3/667"></audio>

<script>
let targets = JSON.parse(localStorage.getItem('targets')||'[]');
let debts = JSON.parse(localStorage.getItem('debts')||'[]');

function saveData(){
  localStorage.setItem('targets',JSON.stringify(targets));
  localStorage.setItem('debts',JSON.stringify(debts));
}

function openPage(id){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');

  if(id==='savings') setBubble("Saving a little today, a big dream tomorrow üí∞");
  if(id==='debts') setBubble("Don‚Äôt worry, I‚Äôll help you track everything clearly üìí");
  if(id==='planner') setBubble("Let‚Äôs divide your money wisely for your needs üí°");
  if(id==='home') setBubble("Hi, I‚Äôm Mina üê± I‚Äôll help you manage your money smartly!");
}

function setBubble(text){
  document.getElementById('bubble').innerText=text;
}

function toggleDark(){
  document.body.classList.toggle('dark');
}

function meow(){
  document.getElementById('meowSound').play();
}

function addTarget(){
  let name=document.getElementById('targetName').value;
  let amount=parseInt(document.getElementById('targetAmount').value);
  if(!name||!amount)return;

  targets.push({name,amount,saved:0});
  saveData();
  renderTargets();
}

function addSaving(){
  let amount=parseInt(document.getElementById('saveInput').value);
  if(!amount)return;

  document.getElementById('coinSound').play();

  let remaining=amount;

  for(let t of targets){
    if(remaining<=0) break;

    let need=t.amount-t.saved;

    if(need>0){
      let use=Math.min(need,remaining);
      t.saved+=use;
      remaining-=use;

      if(t.saved>=t.amount){
        document.getElementById('successSound').play();
        alert("üéâ Target achieved: "+t.name);
      }
    }
  }

  if(remaining>0){
    alert("Extra money moved to next savings: "+remaining);
  }

  saveData();
  renderTargets();
}

function renderTargets(){
  let div=document.getElementById('targets');
  div.innerHTML='';

  targets.forEach(t=>{
    let percent=(t.saved/t.amount)*100;

    div.innerHTML+=`
    <div class="card">
      <h3>${t.name}</h3>
      <p>${format(t.saved)} / ${format(t.amount)}</p>
      <div class="progress"><div class="progress-bar" style="width:${percent}%"></div></div>
    </div>
    `;
  });
}

function addDebt(){
  let name=document.getElementById('debtName').value;
  let amount=parseInt(document.getElementById('debtAmount').value);
  if(!name||!amount)return;

  debts.push({name,amount});
  saveData();
  renderDebts();
}

function renderDebts(){
  let div=document.getElementById('debtList');
  div.innerHTML='';

  debts.forEach(d=>{
    div.innerHTML+=`<div class="card">${d.name} : ${format(d.amount)}</div>`;
  });
}

function planMoney(){
  let total=parseInt(document.getElementById('totalMoney').value);
  let priority=parseInt(document.getElementById('priority').value);
  if(!total)return;

  let main=total*(priority/100);
  let other=total-main;

  document.getElementById('planResult').innerHTML=`
  <div class="card">
    <p>Main Priority: ${format(main)}</p>
    <p>Other Needs: ${format(other)}</p>
  </div>`;
}

function format(n){
  return 'Rp '+n.toLocaleString('id-ID');
}

renderTargets();
renderDebts();
</script>

</body>
</html>
